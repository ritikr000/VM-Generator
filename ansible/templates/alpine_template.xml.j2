<domain type="kvm">
  <name>{{ vm_name }}</name>
  <memory unit="MiB">{{ vm_memory }}</memory>
  <vcpu>{{ vm_cpus }}</vcpu>

  <os>
    <type arch="x86_64" machine="pc">hvm</type>
    <boot dev="cdrom"/>
    <boot dev="hd"/>
    <bootmenu enable="yes"/>
  </os>

  <features>
    <acpi/>
    <apic/>
    <pae/>
  </features>

  <devices>
    <!-- Hard Disk -->
    <disk type="file" device="disk">
      <driver name="qemu" type="qcow2"/>
      <source file="/var/lib/libvirt/images/{{ vm_name }}.qcow2"/>
      <target dev="vda" bus="virtio"/>
    </disk>

    <!-- CDROM ISO -->
    <disk type="file" device="cdrom">
      <driver name="qemu" type="raw"/>
      <source file="{{ iso_path }}"/>
      <target dev="hdc" bus="ide"/>
      <readonly/>
    </disk>

    <!-- Network (optional) -->
    <interface type="network">
      <source network="default"/>
      <model type="virtio"/>
    </interface>

    <!-- Display over VNC -->
    <graphics type="vnc" port="-1" autoport="yes"/>

    <!-- Input and Video Devices -->
    <video>
      <model type="qxl"/>
    </video>
    <input type="tablet" bus="usb"/>
  </devices>
</domain>

